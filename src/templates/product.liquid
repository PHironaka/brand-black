{%- assign current_variant = product.selected_or_first_available_variant -%}




<div class="chart-modal modal-box">
    <a href="#" class="close">X</a>
    <div class="gallery-wrapper ">
        <ul class="gallery list-unstyled">
          <li>
              <img src="https://cdn.shopify.com/s/files/1/2140/7529/files/BRANDBLACK_SIZE_CHART.jpeg?5688401156162915247" alt="Size Chart for {{ product.title }}" class="img-responsive img-thumb size-chart-img">
          </li>
        </ul>
    </div>
    <div class="overlay"></div>
</div>



  {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}



  <meta itemprop="name" content="{{ product.title }}{% unless product.has_only_default_variant %} - {{ current_variant.title }}{% endunless %}">
  <meta itemprop="url" content="{{ shop.url }}{{ current_variant.url }}">
  <meta itemprop="brand" content="{{ product.vendor }}">
  <meta itemprop="image" content="{{ featured_image | img_url: '600x600' }}">
  <meta itemprop="description" content="{{ product.description | strip_html | escape }}">


  {% if featured_image != blank %}
  <div class="product-item">
    <img src="{{ featured_image | img_url: '480x480' }}" alt="{{ featured_image.alt | escape }}" data-product-featured-image>

  
  {%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_img_src = current_variant.featured_image.src | default: product.featured_image.src -%}
{%- assign featured_img_alt = current_variant.featured_image.alt | default: product.featured_image.alt -%}

{% comment %}

{% if product.images.size > 1 %}
<div class="product-thumbnails col-lg-1 col-sm-1 hidden-xs">
    <ul class="product-thumbs product-single__thumbnails product-single__thumbnails-{{ section.id }} list-unstyled">
        {% for image in product.images %}
        <li class="product-single__thumbnails-item" data-color="{{ image.alt }}">
          <a href="{{ image.src | img_url: product_image_size }}" class="text-link product-single__thumbnail product-single__thumbnail--{{ section.id }}">
            <img src="{{ image.src | img_url: '88x' }}" data-lrg="{{ image.src | img_url: '1280x' }}" class="img-responsive img-thumb product-single__thumbnail-image" alt="{{ image.alt }}">
          </a>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}  
{% endcomment %}
    </div>
  {% endif %}


<div class="product-item">
  <h2>{{ product.title }}</h2>

    <div class="product-price" data-price-wrapper>
        <span data-product-price>
          {{ current_variant.price | money }}
        </span>

        {% if product.compare_at_price_max > product.price %}
          <span class="visually-hidden" data-compare-text>{{ 'products.product.regular_price' | t }}</span>
          <s data-compare-price>
            {% if current_variant.compare_at_price > current_variant.price %}
              {{ current_variant.compare_at_price | money }}
            {% endif %}
          </s>
        {% endif %}
      </div>





  <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
    <meta itemprop="priceCurrency" content="{{ shop.currency }}">
    <meta itemprop="price" content="{{ current_variant.price | divided_by: 100.00 }}">
    <link itemprop="availability" href="http://schema.org/{% if current_variant.available %}InStock{% else %}OutOfStock{% endif %}">

    <form action="/cart/add" method="post" enctype="multipart/form-data">
      {% unless product.has_only_default_variant %}
        {% for option in product.options_with_values %}
          <div class="selector-wrapper js">
            

            <select
              id="SingleOptionSelector-{{ forloop.index0 }}"
              data-single-option-selector
              data-index="option{{ option.position }}">
              {% for value in option.values %}
                <option
                  value="{{ value | escape }}"
                  {% if option.selected_value == value %}selected="selected"{% endif %}>
                    {{ value }}
                </option>
              {% endfor %}
            </select>
          </div>
        {% endfor %}
      {% endunless %}

      <select name="id" class="no-js" data-product-select>
        {% for variant in product.variants %}
          <option
            {% if variant == current_variant %}selected="selected"{% endif %}
            {% unless variant.available %}disabled="disabled"{% endunless %}
            value="{{ variant.id }}">
              {{ variant.title }}
          </option>
        {% endfor %}
      </select>

{% comment %}
      <label for="Quantity">{{ 'products.product.quantity' | t }}</label>
      <input type="number" id="Quantity" name="quantity" value="1" min="1">
{% endcomment %}

    

      <button class="add-to-cart"
        type="submit"
        name="add"
        data-add-to-cart
        {% unless current_variant.available %}disabled="disabled"{% endunless %}>
          <span data-add-to-cart-text>
            {% if current_variant.available %}
              {{ 'products.product.add_to_cart' | t }}
            {% else %}
              {{ 'products.product.sold_out' | t }}
            {% endif %}
          </span>
      </button>
    </form>

  </div>
    <div class="product-description">
  <p>
    {{ product.description | strip_html }}
    </p>
  </div>

    <div class="col-sm-6"><a href="#" id="sizeInit" class="btn  btn-size btn-add btn-block text-uppercase">Size Chart</a></div>



  </div>
<div class="related-products">

<h2> Related Products </h2>
</div>
{% include 'related-products' %}


  {% if section.settings.show_share_buttons %}
    {% include 'social-sharing', share_title: product.title, share_permalink: product.url, share_image: product %}
  {% endif %}

  {% unless product == empty %}
    <script type="application/json" data-product-json>
      {{ product | json }}
    </script>
  {% endunless %}



{% unless product == empty %}
  <script type="application/json" id="ProductJson-{{ section.id }}">
    {{ product | json }}
  </script>
{% endunless %}


<script>
  jQuery(function($) {
    
    var $colorSelect = $('.option-selector-Color');
    var $currentColor = $('.option-selector-Color option:selected').val();
    var $thumbnails = $('.product-single__thumbnails').find('li');
    var product = {{ product | json }};
    console.log($currentColor);
    
    function showValues() {
      var product = {{ product | json }};

      $(product.variants).each(function(i, item) { // remove unavailable variants
        if (item.option2 == $currentColor) {
          if (!item.available) {
            $('.product-option option[value="' + item.option1 + '"]').attr('disabled','disabled').hide();
            product.variants.splice(i, 1);
          } else {
            $('.product-option option[value="' + item.option1 + '"]').removeAttr('disabled').show();
            product.variants.splice(i, 1);
          }
        }
      });
    }
    
    function showThumbnails() {
      $thumbnails.each(function() {
        if( $(this).data('color') != $currentColor) {
          $(this).hide();
        } else {
          $(this).fadeIn();
        }
      });
    }
    showThumbnails();
    showValues();
    
    $(document).on('change', $colorSelect, function(e) {
      $currentColor = $('.option-selector-Color option:selected').val();
      showThumbnails();
      showValues();
    });   
    
  });
   
</script>

